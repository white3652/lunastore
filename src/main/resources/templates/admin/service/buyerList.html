<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{member.management.title}">회원 관리</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/adminCSS/admin_header.css}">
    <link rel="stylesheet" th:href="@{/css/adminCSS/admin_user_tb.css}">
    <link rel="stylesheet" th:href="@{/css/adminCSS/admin_sidebar.css}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/icon/icon.css}">
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script th:src="@{/js/admin/openBox.js}"></script>
    <script th:src="@{/js/admin/MailBtn_ExcelBtn.js}"></script>
    <script th:src="@{/js/admin/sidebar.js}"></script>
</head>
<body>
<div th:replace="~{admin/common/header :: header}"></div>
<div th:replace="~{admin/common/adminBuyerSidebar :: sidebar}"></div>
<section>
    <div class="admin_content">
        <div class="admin_content_head">
            <span>HOME</span> <i class="arrow_small_right"></i><span th:text="#{member.management}">회원관리</span> <i class="arrow_small_right"></i><span th:text="#{member.info.management}">회원 정보관리</span>
        </div>
        <div class="admin_s_wrap">
            <h1 th:text="#{member.info.management}">회원 정보관리</h1>
            <form method="post" th:action="@{/admin/buyers/search}" th:object="${searchVO}">
                <div class="admin_tbl_form">
                    <table>
                        <colgroup>
                            <col class="admin_left_col">
                            <col>
                        </colgroup>
                        <tbody>
                        <tr>
                            <th scope="row" th:text="#{search.keyword}">검색어</th>
                            <td>
                                <select class="admin_dropdown" th:field="*{searchField}">
                                    <option value="b_email" th:text="#{search.id}">아이디</option>
                                    <option value="b_lastname" th:text="#{search.member.name}">회원명</option>
                                    <option value="b_tel" th:text="#{search.phone}">핸드폰</option>
                                </select>
                                <input type="search" th:field="*{searchWord}" class="frm_input" size="30">
                            </td>
                        </tr>
                        <tr>
                            <th scope="row" th:text="#{search.period}">기간검색</th>
                            <td>
                                <select class="admin_dropdown" th:field="*{searchField2}">
                                    <option value="b_regdate" th:text="#{search.registration.date}">가입날짜</option>
                                    <option value="b_lastlogindate" th:text="#{search.last.login}">최근접속</option>
                                </select>
                                <input type="date" th:field="*{searchWord2}" class="frm_input" min="2024-01-01" max="2030-01-01"> ~
                                <input type="date" th:field="*{searchWord3}" class="frm_input" min="2024-01-01" max="2030-01-01">
                            </td>
                        </tr>
                        <tr>
                            <th scope="row" th:text="#{search.grade}">등급검색</th>
                            <td>
                                <label><input type="radio" th:field="*{searchField3}" value="0" th:text="#{search.all}"></label>
                                <label><input type="radio" th:field="*{searchField3}" value="1"> Standard</label>
                                <label><input type="radio" th:field="*{searchField3}" value="2"> Premium</label>
                                <label><input type="radio" th:field="*{searchField3}" value="3"> VIP</label>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="admin_btn_posi">
                    <button type="submit" class="admin_btn1" th:text="#{search.button}">검색</button>
                    <button type="reset" class="admin_btn2" th:text="#{reset.button}">>초기화</button>
                </div>
            </form>
            <div class="admin_total_user">
                <span th:text="#{total.members}">총 회원수 :</span> <b class="admin_user_red" th:text="${totalcnt}"></b><span th:text="#{members.unit}">명</span>
            </div>
            <div class="admin_local_form">
                <a th:href="@{/admin/send-email/all}" class="btn_small" id="sendFullEmail" th:text="#{send.all.email}">전체메일발송</a>
                <a th:href="@{/admin/downloads/excel}" class="btn_small" id="ExcelDownloads" th:text="#{download.excel}">엑셀저장</a>
            </div>
            <div class="admin_tb_head">
                <table class="admin_tb_body">
                    <colgroup>
                        <col class="l100">
                        <col class="l100">
                        <col class="l100">
                        <col class="l100">
                        <col class="r100">
                        <col class="r100">
                        <col class="r100">
                    </colgroup>
                    <thead>
                    <tr>
                        <th scope="col" th:text="#{table.number}">번호</th>
                        <th scope="col" th:text="#{table.id}">아이디</th>
                        <th scope="col" th:text="#{table.name}">회원명</th>
                        <th scope="col" th:text="#{table.grade}">등급</th>
                        <th scope="col" th:text="#{table.phone}">핸드폰</th>
                        <th scope="col" th:text="#{table.last.login}">최근접속일</th>
                        <th scope="col" th:text="#{table.point}">포인트</th>
                    </tr>
                    </thead>
                    <tbody class="list">
                    <tr th:each="buyer : ${buyerList}" class="admin_user_list0">
                        <td scope="col" th:text="${buyer.b_idx}"></td>
                        <td scope="col" class="tal">
                                    <span class="sv_wrap">
                                        <a href="#" class="sv_member" th:text="${buyer.b_email}"></a>
                                        <span class="sv">
                                            <a th:href="@{'/admin/buyers/' + ${buyer.b_idx} + '/edit'}" id="openNewWindow" th:text="#{edit.member}">회원수정<br></a>
                                            <a th:href="@{'/admin/buyers/' + ${buyer.b_idx} + '/send-email'}" id="openNewWindow2" th:text="#{send.email}">메일발송<br></a>
                                        </span>
                                    </span>
                        </td>
                        <td scope="col" th:text="${buyer.b_firstname + ' ' + buyer.b_lastname}"></td>
                        <td scope="col" th:text="${buyer.b_grade}"></td>
                        <td scope="col" th:text="${buyer.b_tel}"></td>
                        <td scope="col" th:with="year=${#dates.year(buyer.b_lastlogindate)},
                         month=${#dates.month(buyer.b_lastlogindate)},
                         day=${#dates.day(buyer.b_lastlogindate)}"
                            th:text="#{date.format(${year}, ${month}, ${day})}"></td>
                        <td scope="col" th:text="${buyer.b_point}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
<script>
    $(document).ready(function(){
        $('.sv_member').on('click', function(e){
            e.preventDefault();
            $(this).next('.sv').toggle();
        });
    });
</script>
</body>
</html>
